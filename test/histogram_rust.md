# `histogram.rs` テスト解説

このドキュメントは `src-tauri/src/histogram.rs` に追加された単体テストについて解説します。

## テスト対象モジュール

`histogram.rs` は、画像のヒストグラム（輝度や色の分布図）を計算する機能を提供するモジュールです。

## 今回のテスト対象関数

- `calculate_rgb_histogram`: 画像のR, G, B各チャンネルの色の強度分布を計算します。
- `calculate_luminance_histogram`: 画像の輝度（明るさ）の分布を計算します。

## テストケース

これらの関数に対して、以下のシナリオを検証するテストが実装されています。

1.  **単色画像のRGBヒストグラム**
    - 真っ赤な画像（R=255, G=0, B=0）を与えた場合に、Rチャンネルのヒストグラムでは255の値を持つピクセル数が正しくカウントされ、G, Bチャンネルでは0の値を持つピクセル数がカウントされることを確認します。

2.  **グレー画像の輝度ヒストグラム**
    - グレー（R=G=B=128）の画像を与えた場合に、輝度も128として正しく計算され、ヒストグラムに反映されることを確認します。

3.  **特定色の輝度計算の検証**
    - 特定のRGB値を持つ1ピクセルの画像について、輝度計算式（BT.709）に基づいた結果が正確であるかを確認します。

4.  **キャンセル機能の検証**
    - 計算処理の途中でキャンセルが要求された場合に、処理が正常に中断され、エラーが返されることを確認します。これにより、重い処理を安全に停止できることを保証します。
