# UI統合とフッター機能強化 タスク一覧

## フェーズ1: バックエンド実装

### タスク1.1: ファイルサイズ取得コマンドの実装
- [ ] `src-tauri/src/file_operations.rs`に`get_file_size`関数を追加
- [ ] ファイルのメタデータからサイズを取得
- [ ] エラーハンドリングを実装
- [ ] `src-tauri/src/lib.rs`にコマンドを登録

### タスク1.2: ファイル削除コマンドの実装
- [ ] `src-tauri/src/file_operations.rs`に`delete_file`関数を追加
- [ ] ファイル削除処理を実装
- [ ] エラーハンドリングを実装
- [ ] `src-tauri/src/lib.rs`にコマンドを登録

## フェーズ2: フロントエンド - AppStateContext更新

### タスク2.1: AppStateContextにファイルサイズ状態を追加
- [ ] `imageFileSize`シグナルを追加
- [ ] `setImageFileSize`関数を追加
- [ ] ファイルパス変更時にファイルサイズを取得する処理を追加

## フェーズ3: フロントエンド - Footer更新

### タスク3.1: ファイルサイズ表示の実装
- [ ] ファイルサイズをフォーマットする関数を追加（MB/KB変換）
- [ ] レイアウトを更新（左から: ファイルサイズ、解像度、...）
- [ ] スタイリングを調整

### タスク3.2: 削除ボタンの実装
- [ ] ゴミ箱アイコンのSVGを追加
- [ ] 削除ボタンコンポーネントを追加
- [ ] 削除ハンドラーを実装（確認ダイアログ含む）
- [ ] 削除後の画像遷移ロジックを実装
- [ ] ボタンの有効/無効制御を実装
- [ ] レイアウトに配置（エクスプローラーボタンの隣）

## フェーズ4: フロントエンド - Titlebar統合

### タスク4.1: Titlebarのpropsを拡張
- [ ] FloatingControlPanelと同じpropsを追加
- [ ] 型定義を更新

### タスク4.2: ズーム・回転・フィット機能の統合
- [ ] ズームイン/アウト/リセットボタンを追加
- [ ] 画面フィットボタンを追加
- [ ] 回転ボタンを追加
- [ ] ボタンスタイリング（ガラスモーフィズム）を適用

### タスク4.3: マルチメニューと設定メニューの統合
- [ ] マルチメニューボタンを追加
- [ ] 設定ボタンを追加
- [ ] MultiMenuコンポーネントをインポートして配置
- [ ] SettingsMenuコンポーネントをインポートして配置
- [ ] メニュー表示/非表示ロジックを実装
- [ ] メニュー外クリックで閉じる処理を実装

### タスク4.4: レイアウトとスタイリングの調整
- [ ] Titlebarの高さを調整（必要に応じて）
- [ ] ボタンの配置とスペーシングを調整
- [ ] ウィンドウコントロールとの境界を明確化
- [ ] レスポンシブ対応の確認

## フェーズ5: フロントエンド - App.tsx更新

### タスク5.1: FloatingControlPanelの削除
- [ ] FloatingControlPanelのimportを削除
- [ ] FloatingControlPanelの使用箇所を削除

### タスク5.2: Titlebarへのprops追加
- [ ] 全ての必要なpropsをTitlebarに渡す
- [ ] ハンドラー関数をTitlebarに渡す

## フェーズ6: クリーンアップ

### タスク6.1: FloatingControlPanelの削除
- [ ] `src/components/FloatingControlPanel/index.tsx`を削除
- [ ] FloatingControlPanel関連のlocalStorage処理を確認・削除
- [ ] AppStateContextから`controlPanelPosition`関連の状態を削除（不要な場合）

## フェーズ7: テストとビルド

### タスク7.1: 機能テスト
- [ ] ファイルサイズ表示が正しく動作するか確認
- [ ] 削除ボタンが正しく動作するか確認
- [ ] 削除後の画像遷移が正しく動作するか確認
- [ ] Titlebarの全てのボタンが正しく動作するか確認
- [ ] メニューの表示/非表示が正しく動作するか確認

### タスク7.2: ビルドチェック
- [ ] `npm run build`でビルドエラーがないか確認
- [ ] コンパイルエラーがないか確認
- [ ] 警告がないか確認

### タスク7.3: 動作確認
- [ ] `npm run dev`で開発環境での動作を確認
- [ ] UI/UXが期待通りか確認
- [ ] パフォーマンスに問題がないか確認

## フェーズ8: ドキュメント更新

### タスク8.1: README更新（必要に応じて）
- [ ] 新しい機能（削除ボタン、ファイルサイズ表示）をREADMEに追加
- [ ] UIの変更点を記載

### タスク8.2: メモリの更新
- [ ] Serenaのメモリに今回の変更を記録
