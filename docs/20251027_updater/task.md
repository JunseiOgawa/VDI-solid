# Tauri v2アップデーター実装タスク

## Phase 1: 基本設定の完了

- [x] パーミッション設定
  - [x] `capabilities/default.json`に`updater:default`を追加
  - [x] `capabilities/default.json`に`process:default`を追加

- [x] エンドポイント設定
  - [x] `tauri.conf.json`に`updater.endpoints`を追加
  - [x] GitHub Releasesを使用するエンドポイントを設計

- [x] 署名ドキュメント作成
  - [x] 秘密鍵の生成手順をドキュメント化
  - [x] ビルド時の環境変数設定方法をドキュメント化
  - [x] 更新サーバーのセットアップ方法をドキュメント化

## Phase 2: フロントエンド実装

- [x] 更新チェック機能の実装
  - [x] `src/services/UpdateManager.ts`を作成（既存）
  - [x] 起動時の自動チェック機能を実装（既存）
  - [x] エラーハンドリングを実装（既存）
  - [x] レート制限機能を実装（既存）

- [x] UI実装
  - [x] 設定画面に「更新確認」ボタンを追加（既存）
  - [x] 更新通知ダイアログを実装（既存）
  - [x] チェック状態の表示を実装（既存）

- [x] アプリ起動時の統合
  - [x] `App.tsx`で起動時チェックを呼び出し（既存）
  - [x] 6時間間隔での自動チェックを実装（既存）

## Phase 3: テストと検証

- [ ] ローカルテスト環境のセットアップ
  - [ ] ローカル更新サーバーを構築
  - [ ] テスト用の更新JSONを作成
  - [ ] 署名ファイルを生成

- [ ] 動作確認
  - [ ] Windowsでの動作確認
  - [ ] macOSでの動作確認（可能であれば）
  - [ ] Linuxでの動作確認（可能であれば）

- [ ] エラーケースのテスト
  - [ ] ネットワークエラー時の挙動確認
  - [ ] 署名検証失敗時の挙動確認
  - [ ] ダウンロード中断時の挙動確認

## Phase 4: ドキュメント整備

- [ ] README更新
  - [ ] 更新機能の説明を追加
  - [ ] 開発者向けの署名設定手順を追加

- [ ] ユーザードキュメント
  - [ ] 更新機能の使い方を説明
  - [ ] トラブルシューティングを追加

## メモ

- GitHub Releasesを更新サーバーとして利用する場合、静的なJSON APIを別途用意する必要がある
- 署名キーは絶対にGitリポジトリにコミットしないこと
- 環境変数`TAURI_SIGNING_PRIVATE_KEY`はCI/CDパイプラインのシークレットとして保存
